<% Current.meta_tags.set(title: "Previous Chats") %>

<div class="container mx-auto px-4 py-8 max-w-4xl">
  <div class="mb-6 flex items-center justify-between">
    <div>
      <h1 class="text-2xl font-bold text-gray-900">Previous Chats</h1>
      <p class="text-gray-600 mt-1"><%= @role_play.name %></p>
    </div>
    <div class="flex gap-2">
      <%= link_to "Start Chat", new_role_play_role_play_session_path(@role_play), class: "inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors font-medium" %>
      <%= link_to "All Scenarios", role_plays_path, class: "inline-flex items-center gap-2 px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors font-medium" %>
    </div>
  </div>

  <% if @sessions.any? %>
    <div class="bg-white rounded-lg border border-gray-200 divide-y">
      <% @sessions.each do |session| %>
        <div class="p-4 flex items-center justify-between">
          <div class="text-gray-800">
            <div class="font-medium">
              <%= session.created_at.in_time_zone(current_user.time_zone || Time.zone).strftime("%b %e, %Y %l:%M %p") %>
            </div>
            <div class="text-sm text-gray-500">Status: <%= session.status %></div>
          </div>
          <div class="flex items-center gap-2">
            <%= link_to "Open", role_play_session_path(session), class: "px-3 py-2 text-sm bg-white border border-gray-300 rounded-md hover:bg-gray-50" %>
          </div>
        </div>
      <% end %>
    </div>
  <% else %>
    <div class="bg-gray-50 rounded-lg border-2 border-dashed border-gray-300 p-12 text-center">
      <p class="text-gray-600">No prior chats for this scenario yet.</p>
    </div>
  <% end %>
</div>

